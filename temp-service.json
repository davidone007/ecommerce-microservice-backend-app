{
    "id":  null,
    "uid":  "micro-service",
    "title":  "Microservice - Service Detail",
    "timezone":  "browser",
    "schemaVersion":  36,
    "version":  1,
    "refresh":  "10s",
    "templating":  {
                       "list":  [
                                    {
                                        "type":  "query",
                                        "name":  "service",
                                        "label":  "Service",
                                        "datasource":  "Prometheus",
                                        "query":  "label_values(job)",
                                        "multi":  false,
                                        "includeAll":  false
                                    }
                                ]
                   },
    "panels":  [
                   {
                       "id":  1,
                       "gridPos":  {
                                       "x":  0,
                                       "y":  0,
                                       "w":  12,
                                       "h":  6
                                   },
                       "type":  "timeseries",
                       "title":  "Request rate",
                       "datasource":  "Prometheus",
                       "targets":  [
                                       {
                                           "expr":  "sum(rate(http_server_requests_seconds_count{job=~\"$service\"}[1m]))",
                                           "refId":  "A"
                                       }
                                   ]
                   },
                   {
                       "id":  2,
                       "gridPos":  {
                                       "x":  0,
                                       "y":  6,
                                       "w":  6,
                                       "h":  6
                                   },
                       "type":  "timeseries",
                       "title":  "P95 latency",
                       "datasource":  "Prometheus",
                       "targets":  [
                                       {
                                           "expr":  "histogram_quantile(0.95, sum(rate(http_server_requests_seconds_bucket{job=~\"$service\"}[5m])) by (le, instance))",
                                           "refId":  "A"
                                       }
                                   ]
                   },
                   {
                       "id":  3,
                       "gridPos":  {
                                       "x":  6,
                                       "y":  6,
                                       "w":  6,
                                       "h":  6
                                   },
                       "type":  "timeseries",
                       "title":  "Error rate (%)",
                       "datasource":  "Prometheus",
                       "targets":  [
                                       {
                                           "expr":  "100 * sum(rate(http_server_requests_seconds_count{job=~\"$service\",status=~\"5..\"}[5m])) / sum(rate(http_server_requests_seconds_count{job=~\"$service\"}[5m]))",
                                           "refId":  "A"
                                       }
                                   ]
                   },
                   {
                       "id":  4,
                       "gridPos":  {
                                       "x":  0,
                                       "y":  12,
                                       "w":  12,
                                       "h":  6
                                   },
                       "type":  "logs",
                       "title":  "Logs (Elasticsearch)",
                       "datasource":  "Elasticsearch",
                       "targets":  [
                                       {
                                           "query":  "service:\"$service\"",
                                           "refId":  "A"
                                       }
                                   ]
                   }
               ]
}
